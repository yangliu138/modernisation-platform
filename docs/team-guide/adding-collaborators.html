<!doctype html>
<html lang="en" class="govuk-template no-js">
  <head>
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">

    <title>Adding collaborators to Modernisation Platform accounts - Modernisation Platform</title>

    <link href="../stylesheets/manifest.css" rel="stylesheet" />

    <link rel="canonical" href="https://user-guide.modernisation-platform.service.justice.gov.uk/team-guide/adding-collaborators.html">

      <meta name="twitter:card" content="summary" />
      <meta name="twitter:domain" content="user-guide.modernisation-platform.service.justice.gov.uk" />
      <meta name="twitter:image" content="https://user-guide.modernisation-platform.service.justice.gov.uk/images/govuk-large.png" />
      <meta name="twitter:title" content="Adding collaborators to Modernisation Platform accounts - Modernisation Platform" />
      <meta name="twitter:url" content="https://user-guide.modernisation-platform.service.justice.gov.uk/team-guide/adding-collaborators.html" />

      <meta property="og:image" content="https://user-guide.modernisation-platform.service.justice.gov.uk/images/govuk-large.png" />
      <meta property="og:site_name" content="Modernisation Platform" />
      <meta property="og:title" content="Adding collaborators to Modernisation Platform accounts" />
      <meta property="og:type" content="object" />
      <meta property="og:url" content="https://user-guide.modernisation-platform.service.justice.gov.uk/team-guide/adding-collaborators.html" />

    
  </head>

  <body class="govuk-template__body">
    <script>document.body.className = ((document.body.className) ? document.body.className + ' js-enabled' : 'js-enabled');</script>

    <div class="app-pane">
      <div class="app-pane__header toc-open-disabled">
        <a href="#content" class="govuk-skip-link">Skip to main content</a>

        <header class="govuk-header app-header" role="banner" data-module="govuk-header">
  <div class="govuk-header__container govuk-header__container--full-width">
    <div class="govuk-header__logo">
      <a href="/" class="govuk-header__link govuk-header__link--homepage">
        <span class="govuk-header__logotype">
          <svg
            aria-hidden="true"
            focusable="false"
            class="govuk-header__logotype-crown"
            xmlns="http://www.w3.org/2000/svg"
            viewbox="0 0 132 97"
            height="30"
            width="36"
          >
            <path
              fill="currentColor" fill-rule="evenodd"
              d="M25 30.2c3.5 1.5 7.7-.2 9.1-3.7 1.5-3.6-.2-7.8-3.9-9.2-3.6-1.4-7.6.3-9.1 3.9-1.4 3.5.3 7.5 3.9 9zM9 39.5c3.6 1.5 7.8-.2 9.2-3.7 1.5-3.6-.2-7.8-3.9-9.1-3.6-1.5-7.6.2-9.1 3.8-1.4 3.5.3 7.5 3.8 9zM4.4 57.2c3.5 1.5 7.7-.2 9.1-3.8 1.5-3.6-.2-7.7-3.9-9.1-3.5-1.5-7.6.3-9.1 3.8-1.4 3.5.3 7.6 3.9 9.1zm38.3-21.4c3.5 1.5 7.7-.2 9.1-3.8 1.5-3.6-.2-7.7-3.9-9.1-3.6-1.5-7.6.3-9.1 3.8-1.3 3.6.4 7.7 3.9 9.1zm64.4-5.6c-3.6 1.5-7.8-.2-9.1-3.7-1.5-3.6.2-7.8 3.8-9.2 3.6-1.4 7.7.3 9.2 3.9 1.3 3.5-.4 7.5-3.9 9zm15.9 9.3c-3.6 1.5-7.7-.2-9.1-3.7-1.5-3.6.2-7.8 3.7-9.1 3.6-1.5 7.7.2 9.2 3.8 1.5 3.5-.3 7.5-3.8 9zm4.7 17.7c-3.6 1.5-7.8-.2-9.2-3.8-1.5-3.6.2-7.7 3.9-9.1 3.6-1.5 7.7.3 9.2 3.8 1.3 3.5-.4 7.6-3.9 9.1zM89.3 35.8c-3.6 1.5-7.8-.2-9.2-3.8-1.4-3.6.2-7.7 3.9-9.1 3.6-1.5 7.7.3 9.2 3.8 1.4 3.6-.3 7.7-3.9 9.1zM69.7 17.7l8.9 4.7V9.3l-8.9 2.8c-.2-.3-.5-.6-.9-.9L72.4 0H59.6l3.5 11.2c-.3.3-.6.5-.9.9l-8.8-2.8v13.1l8.8-4.7c.3.3.6.7.9.9l-5 15.4v.1c-.2.8-.4 1.6-.4 2.4 0 4.1 3.1 7.5 7 8.1h.2c.3 0 .7.1 1 .1.4 0 .7 0 1-.1h.2c4-.6 7.1-4.1 7.1-8.1 0-.8-.1-1.7-.4-2.4V34l-5.1-15.4c.4-.2.7-.6 1-.9zM66 92.8c16.9 0 32.8 1.1 47.1 3.2 4-16.9 8.9-26.7 14-33.5l-9.6-3.4c1 4.9 1.1 7.2 0 10.2-1.5-1.4-3-4.3-4.2-8.7L108.6 76c2.8-2 5-3.2 7.5-3.3-4.4 9.4-10 11.9-13.6 11.2-4.3-.8-6.3-4.6-5.6-7.9 1-4.7 5.7-5.9 8-.5 4.3-8.7-3-11.4-7.6-8.8 7.1-7.2 7.9-13.5 2.1-21.1-8 6.1-8.1 12.3-4.5 20.8-4.7-5.4-12.1-2.5-9.5 6.2 3.4-5.2 7.9-2 7.2 3.1-.6 4.3-6.4 7.8-13.5 7.2-10.3-.9-10.9-8-11.2-13.8 2.5-.5 7.1 1.8 11 7.3L80.2 60c-4.1 4.4-8 5.3-12.3 5.4 1.4-4.4 8-11.6 8-11.6H55.5s6.4 7.2 7.9 11.6c-4.2-.1-8-1-12.3-5.4l1.4 16.4c3.9-5.5 8.5-7.7 10.9-7.3-.3 5.8-.9 12.8-11.1 13.8-7.2.6-12.9-2.9-13.5-7.2-.7-5 3.8-8.3 7.1-3.1 2.7-8.7-4.6-11.6-9.4-6.2 3.7-8.5 3.6-14.7-4.6-20.8-5.8 7.6-5 13.9 2.2 21.1-4.7-2.6-11.9.1-7.7 8.8 2.3-5.5 7.1-4.2 8.1.5.7 3.3-1.3 7.1-5.7 7.9-3.5.7-9-1.8-13.5-11.2 2.5.1 4.7 1.3 7.5 3.3l-4.7-15.4c-1.2 4.4-2.7 7.2-4.3 8.7-1.1-3-.9-5.3 0-10.2l-9.5 3.4c5 6.9 9.9 16.7 14 33.5 14.8-2.1 30.8-3.2 47.7-3.2z"
            ></path>
            <image src="/assets/images/govuk-logotype-crown.png" xlink:href="" class="govuk-header__logotype-crown-fallback-image" width="36" height="32"></image>
          </svg>
          <span class="govuk-header__logotype-text">
            GOV.UK
          </span>
        </span>
        <span class="govuk-header__product-name">
          Modernisation Platform
        </span>
      </a>
        <strong class="govuk-tag">Alpha</strong>
    </div>
    <div class="govuk-header__content">
      <button type="button" class="govuk-header__menu-button govuk-js-header-toggle" aria-controls="navigation" aria-label="Show or hide Top Level Navigation">Menu</button>
      <nav>
        <ul id="navigation" class="govuk-header__navigation govuk-header__navigation--end" aria-label="Top Level Navigation">
            <li class="govuk-header__navigation-item">
              <a class="govuk-header__link" href="/modernisation-platform">Home</a>
            </li>
            <li class="govuk-header__navigation-item">
              <a class="govuk-header__link" href="https://github.com/ministryofjustice/modernisation-platform">GitHub</a>
            </li>
            <li class="govuk-header__navigation-item">
              <a class="govuk-header__link" href="https://mojdt.slack.com/archives/C01A7QK5VM1">Slack</a>
            </li>
        </ul>
      </nav>
    </div>
  </div>
</header>

      </div>

        <div id="toc-heading" class="toc-show fixedsticky">
          <a href="#toc" class="toc-show__label js-toc-show" aria-controls="toc">
            Table of contents <span class="toc-show__icon"></span>
          </a>
        </div>

      <div class="app-pane__body" data-module="in-page-navigation">
          <div class="app-pane__toc">
            <div class="toc" data-module="table-of-contents">
              <div class="search" data-module="search">
  <form action="https://www.google.co.uk/search" method="get" role="search">
    <input type="hidden" name="as_sitesearch" value="https://user-guide.modernisation-platform.service.justice.gov.uk"/>
    <label class="govuk-label search__label" for="search">
      Search (via Google)
    </label>
    <input class="govuk-input govuk-!-margin-bottom-4" id="search" name="q" type="text" aria-controls="search-results" placeholder="Search">
  </form>
  <div id="search-results" class="search-results" aria-hidden="true" role="dialog" aria-labelledby="search-results-title">
    <div class="search-results__inner">
      <button class="search-results__close">Close<span class="search-results__close-label"> search results</span></button>
      <h2 id="search-results-title" class="search-results__title" aria-live="polite">Results</h2>
      <div class="search-results__content"></div>
    </div>
  </div>
</div>

              <a href="#" class="toc__close js-toc-close" aria-controls="toc" aria-label="Hide table of contents"></a>
              <nav id="toc" class="js-toc-list toc__list" aria-labelledby="toc-heading">
                      <ul>
  <li>
    <a href="#adding-collaborators-to-modernisation-platform-accounts"><span>Adding collaborators to Modernisation Platform accounts</span></a>
    <ul>
      <li>
        <a href="#access-to-our-github-repositories"><span>Access to our Github repositories</span></a>
      </li>
      <li>
        <a href="#access-to-the-relevant-aws-accounts"><span>Access to the relevant AWS accounts</span></a>
        <ul>
          <li>
          </li>
        </ul>
      </li>
      <li>
        <a href="#access-to-be-able-to-approve-deployments"><span>Access to be able to approve deployments</span></a>
      </li>
      <li>
        <a href="#running-a-terraform-plan-locally-as-a-collaborator"><span>Running a Terraform plan locally as a collaborator</span></a>
      </li>
    </ul>
  </li>
</ul>


              </nav>
            </div>
          </div>

        <div class="app-pane__content toc-open-disabled">
          <main id="content" class="technical-documentation" data-module="anchored-headings">
            <h1 id="adding-collaborators-to-modernisation-platform-accounts">Adding collaborators to Modernisation Platform accounts</h1><p>Collaborators are defined as GitHub users which are not part of the <code>ministryofjustice</code> GitHub organisation.
Users who are part of the organisation are added to the platform by joining a <a href="../user-guide/creating-environments.html#github-team-slug">GitHub team</a>.</p>
<p>To enable collaborators to use the Modernisation Platform we need to give them the following access:</p>

<ul>
<li>Access to our Github repositories</li>
<li>Access to the relevant AWS accounts</li>
<li>Access to be able to approve deployments</li>
</ul>
<h2 id="access-to-our-github-repositories">Access to our Github repositories</h2><p>In order to create infrastructure, collaborators will need to have <code>push</code> permissions to the following repositories:</p>

<ul>
<li><a href="https://github.com/ministryofjustice/modernisation-platform-environments">modernisation-platform-environments</a></li>
<li><a href="https://github.com/ministryofjustice/modernisation-platform-ami-builds">modernisation-platform-ami-builds</a> (only needed if building AMIs)</li>
</ul>
<p>Please follow the instructions in the MoJ <a href="https://github.com/ministryofjustice/github-collaborators">github-collaborators</a> repository on how to add them.</p>
<p>Under &ldquo;reason&rdquo; please put the name of the Modernisation Platform application that they require access to.</p>
<h2 id="access-to-the-relevant-aws-accounts">Access to the relevant AWS accounts</h2><p>Add the collaborators to the <a href="https://github.com/ministryofjustice/modernisation-platform/collaborators.json">collaborators.json</a> file.</p>
<p>Valid access levels are <code>read-only</code> (read only access) and <code>developer</code> (read only plus additional permissions detailed <a href="../user-guide/creating-environments.html#developer">here</a>)</p>
<p>The modernisation-platform-account workflow will create the users when a pull request with these changes is merged.</p>
<p>Once their IAM user has been created, log into the AWS console yourself and:</p>

<ul>
<li>switch into the superadmin role in the Modernisation Platform account</li>
<li>go to their IAM user in IAM Users</li>
<li>go to the Security Credentials tab</li>
<li>call the user and assign an MFA device with them</li>
<li>configure console access with an autogenerated password and require a password reset on their next login</li>
</ul>
<h4 id="example-file-entries">Example file entries</h4><div class="highlight"><pre class="highlight plaintext"><code>{
  "users": [
    {
      "username": "test-collaborator-1",
      "github-username": "test-github-1",
      "accounts": [
        {
          "account-name": "sprinkler-development",
          "access": "read-only"
        },
        {
          "account-name": "sprinkler-development",
          "access": "developer"
        },
        {
          "account-name": "testing-test",
          "access": "read-only"
        }
      ]
    },
    {
      "username": "test-collaborator-2",
      "github-username": "test-git-2",
      "accounts": [
        {
          "account-name": "sprinkler-development",
          "access": "read-only"
        }
      ]
    }
  ]
}
</code></pre></div><h4 id="diagram">Diagram</h4><p><a href="../images/collaborators.png" target="_blank" rel="noopener noreferrer"><img src="../images/collaborators.png" alt="Collaborators" /></a></p>
<h2 id="access-to-be-able-to-approve-deployments">Access to be able to approve deployments</h2><p>The limit of the number of reviewers (teams or users) which can be added to a GitHub environment is <a href="https://docs.github.com/en/rest/reference/deployments#create-or-update-an-environment--parameters">six</a>.
Two of these spaces will be taken by the application GitHub team and by the Modernisation Platform GitHub team leaving only four spaces to add collaborators.
For this reason collaborator environment reviewers should be manually added to the environment. (Note - the reviewer will be automatically removed when the collaborators permissions to the repository are removed.)</p>

<ol>
<li>Navigate to <a href="https://github.com/ministryofjustice/modernisation-platform-environments/settings/environments">modernisaton-platform-environments -&gt; settings -&gt; environments</a></li>
<li>Find the required environment and click on it</li>
<li>Under <code>Environment protection rules</code> add the required collaborators</li>
<li>Click <code>Save protection rules</code></li>
</ol>
<h2 id="running-a-terraform-plan-locally-as-a-collaborator">Running a Terraform plan locally as a collaborator</h2><p>To run a Terraform locally as a collaborator, they will need to configure their AWS credentials, and use <a href="https://github.com/99designs/aws-vault">AWS Vault</a> or a similar tool to run Terraform using MFA.</p>
<p>The collaborator should follow the standard <a href="../user-guide/running-terraform-plan-locally.html">running terraform plan locally</a> instructions, ignoring the SSO section, running Terraform using AWS Vault and making one further code change:</p>
<p>Under the local plan section of the <code>providers.tf</code> file:</p>
<div class="highlight"><pre class="highlight plaintext"><code>######################### Run Terraform Plan Locally Only ##################################
# To run a Terraform Plan locally, uncomment this bottom section of code and comment out the top section

provider "aws" {
  region = "eu-west-2"
}
</code></pre></div><p>Add in an assume role block for the main provider with the account number that local plan is for, for example:</p>
<div class="highlight"><pre class="highlight plaintext"><code>######################### Run Terraform Plan Locally Only ##################################
# To run a Terraform Plan locally, uncomment this bottom section of code and comment out the top section

provider "aws" {
  region = "eu-west-2"
  assume_role {
    role_arn = "arn:aws:iam::&lt;my-account-number&gt;:role/developer"
  }
}
</code></pre></div><p>As with all local plan changes, please do not add these changes to version control or the CI/CD GitHub workflows will stop running.</p>

              <div data-module='page-expiry' data-last-reviewed-on="2022-04-30">
    <div class='page-expiry--not-expired'>
      This page was last reviewed on 31 January 2022.

        It needs to be reviewed again on 30 April 2022
        by the page owner <a href="https://mojdt.slack.com/messages/modernisation-platform">#modernisation-platform</a>
        .
    </div>

    <div class='page-expiry--expired'>
      This page was set to be reviewed before 30 April 2022
       by the page owner <a href="https://mojdt.slack.com/messages/modernisation-platform">#modernisation-platform</a>.
      This might mean the content is out of date.
    </div>
  </div>

          </main>

          <aside>
              <ul class="contribution-banner">
                <li><a href="https://github.com/ministryofjustice/modernisation-platform/blob/main/source/team-guide/adding-collaborators.html.md.erb">View source</a></li>
                <li><a href="https://github.com/ministryofjustice/modernisation-platform/issues/new?labels=bug&amp;title=Re:%20'Adding%20collaborators%20to%20Modernisation%20Platform%20accounts'&amp;body=Problem%20with%20'Adding%20collaborators%20to%20Modernisation%20Platform%20accounts'%20(https://user-guide.modernisation-platform.service.justice.gov.uk/team-guide/adding-collaborators.html)">Report problem</a></li>
                <li><a href="https://github.com/ministryofjustice/modernisation-platform">GitHub Repo</a></li>
              </ul>
          </aside>

          <footer class="govuk-footer app-footer" role="contentinfo">
  <div class="govuk-footer__meta">
    <div class="govuk-footer__meta-item govuk-footer__meta-item--grow">


      <svg
        aria-hidden="true"
        focusable="false"
        class="govuk-footer__licence-logo"
        xmlns="http://www.w3.org/2000/svg"
        viewbox="0 0 483.2 195.7"
        height="17"
        width="41"
      >
        <path
          fill="currentColor"
          d="M421.5 142.8V.1l-50.7 32.3v161.1h112.4v-50.7zm-122.3-9.6A47.12 47.12 0 0 1 221 97.8c0-26 21.1-47.1 47.1-47.1 16.7 0 31.4 8.7 39.7 21.8l42.7-27.2A97.63 97.63 0 0 0 268.1 0c-36.5 0-68.3 20.1-85.1 49.7A98 98 0 0 0 97.8 0C43.9 0 0 43.9 0 97.8s43.9 97.8 97.8 97.8c36.5 0 68.3-20.1 85.1-49.7a97.76 97.76 0 0 0 149.6 25.4l19.4 22.2h3v-87.8h-80l24.3 27.5zM97.8 145c-26 0-47.1-21.1-47.1-47.1s21.1-47.1 47.1-47.1 47.2 21 47.2 47S123.8 145 97.8 145"
        />
      </svg>
      <span class="govuk-footer__licence-description">
        All content is available under the
        <a
          class="govuk-footer__link"
          href="https://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/"
          rel="license"
        >Open Government Licence v3.0</a>, except where otherwise stated
      </span>
    </div>
    <div class="govuk-footer__meta-item">
      <a
        class="govuk-footer__link govuk-footer__copyright-logo"
        href="https://www.nationalarchives.gov.uk/information-management/re-using-public-sector-information/uk-government-licensing-framework/crown-copyright/"
      >Â© Crown copyright</a>
    </div>
  </div>
</footer>

        </div>
      </div>
    </div>

    
    <script src="../javascripts/application.js"></script>
  </body>
</html>
